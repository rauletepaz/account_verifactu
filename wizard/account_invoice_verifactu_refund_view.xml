<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_account_invoice_verifactu_refund" model="ir.ui.view">
            <field name="name">account.invoice.verifactu.refund.form</field>
            <field name="model">account.invoice.verifactu.refund</field>
            <field name="arch" type="xml">
                <form string="Veri*factu Credit Note">
                    <group>
                         <group>
                             <field name="refund_only" invisible="1"/>
                             <field name="filter_refund" attrs="{'invisible': [('refund_only','=',True)]}" widget="radio"/>
                         </group>
                         <group>
                             <div attrs="{'invisible':['|',('refund_only','=',True),('filter_refund','!=','refund')]}" class="oe_grey" colspan="4">
                                You will be able to edit and validate this
                                credit note directly or keep it draft,
                                waiting for the document to be issued by
                                your supplier/customer.
                             </div>
                             <div attrs="{'invisible':['|',('refund_only','=',True),('filter_refund','!=','cancel')]}" class="oe_grey" colspan="4">
                                Use this option if you want to cancel an invoice you should not
                                have issued. The credit note will be created, validated and reconciled
                                with the invoice. You will not be able to modify the credit note.
                             </div>
                             <div attrs="{'invisible':['|',('refund_only','=',True),('filter_refund','!=','modify')]}" class="oe_grey" colspan="4">
                                Use this option if you want to cancel an invoice and create a new
                                one. The credit note will be created, validated and reconciled
                                with the current invoice. A new draft invoice will be created
                                so that you can edit it.
                             </div>
                         </group>
                         <group>
                             <field name="description"/>
                         </group>
                         <group>
                             <div attrs="{'invisible':[('description','!=','R1')]}" class="oe_grey" colspan="4" style="padding-left:2em; text-indent:-2em;">
    							R1 – Rectificativa por “error fundado en derecho”. Aart. 80.Uno LIVA<br/>
        							-Errores en la apliacción del regimén (Exportación, Intracomunitario,<br/>
        							 exento, inversión del sujeto pasivo, etc)<br/>
        							-Errores en el cálculo o aplicación de la cuota.
                             </div>
                             <div attrs="{'invisible':[('description','!=','R2')]}" class="oe_grey" colspan="4" style="padding-left:2em; text-indent:-2em;">
    							R2 – Rectificativa por concurso de acreedores (art. 80.Tres LIVA).<br/>
        							 Se usa para reducir la base/cuota cuando el destinatario entra <br/>
        							 en concurso y se cumplen los requisitos de modificación de la base.
                             </div>
                             <div attrs="{'invisible':[('description','!=','R3')]}" class="oe_grey" colspan="4" style="padding-left:2em; text-indent:-2em;">
							    R3 – Rectificativa por créditos incobrables (art. 80.Cuatro LIVA).<br/>
							         Aplica cuando la deuda es incobrable y procede la modificación<br/>
							         de la base. 
                             </div>
                             <div attrs="{'invisible':[('description','!=','R4')]}" class="oe_grey" colspan="4" style="padding-left:2em; text-indent:-2em;">
							    R4 – Rectificativa “resto de supuestos”. Art. 80.Dos LIVA supuestos:<br/>
							        -Error en la identificación del emisor o receptor.<br/>
							        -Descuentos y bonificaciones posteriores.<br/>
							        -Devolución de material.<br/>
							        -Reducción de la base imponible por devolución total o parcial de bienes.<br/>
							        -Devolución de envases, embalajes o mercancías.<br/>
							        -Compensación por calidad, retrasos o penalizaciones comerciales.<br/>
							        -Reducción de la contraprestación pactada.<br/> 
							        -Otras causas de modificación de la contraprestación.
                             </div>
                             <div attrs="{'invisible':[('description','!=','R5')]}" class="oe_grey" colspan="4" style="padding-left:2em; text-indent:-2em;">
							    R5 – Rectificativa de “factura simplificada”.<br/>
							         Es la clave específica cuando lo que se rectifica es una<br/>
							         factura simplificada (ticket/factura simplificada). 
                             </div>
                         </group>
                         <group>
                             <field name="date_invoice"/>
                         </group>
                         <group>
                             <field name="date" groups="base.group_no_one"/>
                         </group>
                    </group>
                    <footer>
                        <button string='Add Credit Note' name="invoice_refund" type="object" class="btn-primary"/>
                        <button string="Cancel" class="btn-default" special="cancel"/>
                    </footer>
               </form>
            </field>
        </record>

        <record id="action_account_invoice_verifactu_refund" model="ir.actions.act_window">
            <field name="name">Veri*factu Credit Note</field>
            <field name="res_model">account.invoice.verifactu.refund</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
           <field name="view_id" ref="view_account_invoice_verifactu_refund"/>
           <field name="target">new</field>
        </record>


    </data>
</odoo>
